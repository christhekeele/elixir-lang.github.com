<!DOCTYPE html>
<html>
  <head>
    <title>Mix.SCM</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

    <script type="text/javascript" charset="utf-8">
      relpath = '';
      if (relpath != '') relpath += '/';
    </script>

    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
  </head>

  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>

    <div id="content">
      <h1>
        Mix.SCM
        
          <small>behaviour</small>
        
      </h1>

      
        <div id="moduledoc" class="docstring">
          <p>This module provides helper functions and defines the
behavior required by any SCM used by mix.</p>

        </div>
      

      <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L1" target="_blank" class="view_source">Source</a>

      

      
        <h2 id="functions_summary">Functions summary</h2>
        <table class="summary">
          <tr>
  <td class="summary_signature"><a href="#available/0">available()</a></td>
  
    <td class="summary_synopsis"><p>Returns all available SCM.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#register/1">register(mod)</a></td>
  
    <td class="summary_synopsis"><p>Register the scm repository with the given <code>key</code> and <code>mod</code>.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#register_builtin/0">register_builtin()</a></td>
  
    <td class="summary_synopsis"><p>Register builtin SCMs.</p>
</td>
  
</tr>

        </table>
      

      

      
        <h2 id="callbacks_summary">Callbacks summary</h2>
        <table class="summary">
          <tr>
  <td class="summary_signature"><a href="#format/1">format(opts())</a></td>
  
    <td class="summary_synopsis"><p>Returns a string representing the SCM. This is used
when printing the dependency and not for inspection,
so the amount of information should be concise and
easy to spot.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#format_lock/1">format_lock(lock())</a></td>
  
    <td class="summary_synopsis"><p>Returns a string representing the SCM. This is used
when printing the dependency and not for inspection,
so the amount of information should be concise and
easy to spot.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#accepts_options/2">accepts_options(app :: atom(), opts())</a></td>
  
    <td class="summary_synopsis"><p>This behavior function receives a keyword list of <code>opts</code>
and should return an updated list in case the SCM consumes
the available options. For example, when a developer specifies
a dependency:</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#checked_out?/1">checked_out?(opts())</a></td>
  
    <td class="summary_synopsis"><p>This behavior function returns a boolean if the
dependency is available.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#checkout/1">checkout(opts())</a></td>
  
    <td class="summary_synopsis"><p>This behavior function checks out dependencies.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#update/1">update(opts())</a></td>
  
    <td class="summary_synopsis"><p>This behavior function updates dependencies. It may be
called by <code>deps.get</code> or <code>deps.update</code>.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#lock_status/1">lock_status(opts())</a></td>
  
    <td class="summary_synopsis"><p>This behavior function checks the status of the lock. In
particular, it checks if the revision stored in the lock
is the same as the repository is currently in. It may return:</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#equal?/2">equal?(opts1 :: opts(), opts2 :: opts())</a></td>
  
    <td class="summary_synopsis"><p>Receives two options and must return true if they refer to the
same repository. The options are guaranteed to belong to the
same SCM.</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#clean/1">clean(opts())</a></td>
  
    <td class="summary_synopsis"><p>This behavior function should clean the given dependency.</p>
</td>
  
</tr>

        </table>
      

      

      
        <div id="functions_details" class="details_list">
          <h2>Functions</h2>
          <div class="detail">
  <p class="signature" id="available/0">
    <strong>available()</strong>
  </p>
  
  <div class="docstring"><p>Returns all available SCM.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L111" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="register/1">
    <strong>register(mod)</strong>
  </p>
  
  <div class="docstring"><p>Register the scm repository with the given <code>key</code> and <code>mod</code>.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L118" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="register_builtin/0">
    <strong>register_builtin()</strong>
  </p>
  
  <div class="docstring"><p>Register builtin SCMs.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L125" target="_blank" class="view_source">Source</a>
  
</div>

        </div>
      

      

      
        <div id="callbacks_details" class="details_list">
          <h2>Callbacks</h2>
          <div class="detail">
  <p class="signature" id="format/1">
    <strong>format(opts())</strong>
  </p>
  
  <div class="docstring"><p>Returns a string representing the SCM. This is used
when printing the dependency and not for inspection,
so the amount of information should be concise and
easy to spot.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L18" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="format_lock/1">
    <strong>format_lock(lock())</strong>
  </p>
  
  <div class="docstring"><p>Returns a string representing the SCM. This is used
when printing the dependency and not for inspection,
so the amount of information should be concise and
easy to spot.</p>

<p>If nil is returned, it means no lock information is available.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L28" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="accepts_options/2">
    <strong>accepts_options(app :: atom(), opts())</strong>
  </p>
  
  <div class="docstring"><p>This behavior function receives a keyword list of <code>opts</code>
and should return an updated list in case the SCM consumes
the available options. For example, when a developer specifies
a dependency:</p>

<pre><code>{ :foo, &quot;0.1.0&quot;, github: &quot;foo/bar&quot; }
</code></pre>

<p>Each registered SCM will be asked if they consume this dependency,
receiving <code>[github: &quot;foo/bar&quot;]</code> as argument. Since this option makes
sense for the Git SCM, it will return an update list of options
while other SCMs would simply return nil.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L43" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="checked_out?/1">
    <strong>checked_out?(opts())</strong>
  </p>
  
  <div class="docstring"><p>This behavior function returns a boolean if the
dependency is available.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L49" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="checkout/1">
    <strong>checkout(opts())</strong>
  </p>
  
  <div class="docstring"><p>This behavior function checks out dependencies.</p>

<p>If the dependency is locked, a lock is received in <code>opts</code>
and the repository must be check out at the lock. Otherwise,
no lock is given and the repository can be checked out
to the latest version.</p>

<p>It must return the current lock.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L61" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="update/1">
    <strong>update(opts())</strong>
  </p>
  
  <div class="docstring"><p>This behavior function updates dependencies. It may be
called by <code>deps.get</code> or <code>deps.update</code>.</p>

<p>In the first scenario, a lock is received in <code>opts</code> and
the repository must be updated to the lock. In the second,
no lock is given and the repository can be updated freely.</p>

<p>It must return the current lock.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L73" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="lock_status/1">
    <strong>lock_status(opts())</strong>
  </p>
  
  <div class="docstring"><p>This behavior function checks the status of the lock. In
particular, it checks if the revision stored in the lock
is the same as the repository is currently in. It may return:</p>

<ul>
<li><code>:mismatch</code> - if the lock doesn&#39;t match and we need to
simply move to the latest lock</li>
<li><code>:outdated</code> - the repository options are out of dated in the
lock and we need to trigger a full update</li>
<li><code>:ok</code> - everything is fine</li>
</ul>

<p>The lock is sent via <code>opts[:lock]</code> but it may not always be
available. In such cases, if the SCM requires a lock, it must
return <code>:lockmismatch</code>, otherwise simply <code>:ok</code>.</p>

<p>Note the lock may also belong to another SCM and as such, an
structural check is required. A structural mismatch should always
return <code>:outdated</code>.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L94" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="equal?/2">
    <strong>equal?(opts1 :: opts(), opts2 :: opts())</strong>
  </p>
  
  <div class="docstring"><p>Receives two options and must return true if they refer to the
same repository. The options are guaranteed to belong to the
same SCM.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L101" target="_blank" class="view_source">Source</a>
  
</div>
<div class="detail">
  <p class="signature" id="clean/1">
    <strong>clean(opts())</strong>
  </p>
  
  <div class="docstring"><p>This behavior function should clean the given dependency.</p>
</div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/v0.11.1/lib/mix/lib/mix/scm.ex#L106" target="_blank" class="view_source">Source</a>
  
</div>

        </div>
      
    </div>
  </body>
</html>
